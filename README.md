# Image2Video

基于OpenCV和MoviePy的图片转视频工具，支持高质量动画效果和平滑过渡。

## 项目特点

- **平滑动画效果**：使用OpenCV实现高精度的动画效果，无抖动、无卡顿
- **多种动画预设**：内置多种专业级摄像机效果（推、拉、移动等）
- **丰富的动画曲线**：支持缓入、缓出、缓入缓出、弹性等多种动画曲线
- **直观的用户界面**：基于PyQt6的简洁界面，易于操作
- **音频支持**：可为图片添加配音，自动调整视频长度匹配音频

## 安装步骤

1. 确保已安装Python 3.7+
2. 克隆仓库
   ```
   git clone https://github.com/yourusername/image2video.git
   cd image2video
   ```
3. 创建并激活虚拟环境
   ```
   python -m venv venv
   source venv/bin/activate  # Linux/Mac
   venv\Scripts\activate  # Windows
   ```
4. 安装依赖
   ```
   pip install -r requirements.txt
   ```

## 使用方法

1. 运行程序
   ```
   python run.py
   ```
2. 使用界面添加图片
3. 选择动画预设和曲线
4. 点击"生成片段"预览单个图片效果
5. 完成所有图片设置后，点击"生成视频"创建完整视频

## 动画类型

- **推**：画面逐渐放大
- **拉**：画面逐渐缩小
- **左移/右移**：摄像机左右移动
- **升/降**：摄像机上下移动
- **左遥/右遥**：左右平移同时放大
- **环绕**：摄像机环绕主体移动
- **聚焦/散焦**：专注于画面中心

## 动画曲线

- **线性**：匀速变化
- **缓入/强缓入/超强缓入**：从慢到快
- **缓出/强缓出/超强缓出**：从快到慢
- **缓入缓出/强缓入缓出**：先慢后快再慢
- **弹性**：带有弹性效果的变化
- **回弹**：带有回弹效果的变化

##技术细节

项目使用OpenCV进行高精度图像变换，通过仿射变换矩阵实现平滑过渡，避免了传统帧间插值导致的抖动问题。动画参数通过数学曲线函数精确计算，确保每一帧的位置和缩放精确无误。

## 功能特点

1. **图片上传与管理**
   - 支持批量上传图片
   - 为每张图片添加对应的文本描述
   - 支持图片预览和排序
   - 支持删除和编辑功能

2. **文本转语音**
   - 支持文本转换为语音
   - 支持语音预览
   - 支持语音参数调整（语速、音调等）

3. **视频生成**
   - 自动将图片和语音合成为视频
   - 支持多种过渡效果（淡入淡出、滑动、缩放等）
   - 支持多种动画效果（推、拉、平移、环绕等）
   - 支持自定义动画曲线（线性、缓入、缓出、弹性等）
   - 支持视频预览
   - 支持导出不同格式和分辨率

## 技术架构

- 开发语言：Python 3.8+
- GUI框架：PyQt6
- 视频处理：MoviePy
- 图像处理：Pillow
- 网络请求：requests
- 数据持久化：JSON

## 界面设计

1. **主界面（图片管理）**
   - 左侧：图片列表，支持拖拽排序
   - 右侧：图片预览和文本编辑区
   - 顶部：工具栏（上传、删除、导出等）
   - 底部：状态栏（显示处理进度）

2. **视频设置界面**
   - 动画效果选择
   - 过渡效果选择
   - 动画曲线选择
   - 视频参数配置（分辨率、帧率等）

3. **视频预览界面**
   - 视频播放器
   - 导出选项
   - 进度显示

## 项目状态

### 已完成功能
- [x] 创建项目基础结构
- [x] 实现主界面布局
- [x] 实现图片上传和预览功能
- [x] 实现视频生成功能
- [x] 实现多种动画效果
- [x] 实现多种过渡效果
- [x] 实现自定义动画曲线
- [x] 实现视频预览功能

### 待完成功能
- [ ] 优化用户界面和交互体验
- [ ] 添加更多视频导出选项
- [ ] 添加批量处理功能
- [ ] 添加更多动画效果
- [ ] 添加更多过渡效果

## 使用说明

1. 启动应用：
   ```bash
   python run.py
   ```

2. 添加图片：
   - 点击"添加图片"按钮或拖拽图片到应用窗口
   - 为每张图片添加描述文本

3. 设置视频效果：
   - 选择动画效果（推、拉、平移等）
   - 选择过渡效果（淡入淡出、滑动等）
   - 选择动画曲线（线性、缓入、缓出等）

4. 生成视频：
   - 点击"生成视频"按钮
   - 等待处理完成
   - 预览生成的视频
   - 导出到指定位置

## 系统要求
- Python 3.8 或更高版本
- 操作系统：Windows/macOS/Linux
- 网络连接（用于API调用）

## 开发环境设置
1. 克隆项目
2. 创建虚拟环境：
   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/macOS
   # 或
   .\venv\Scripts\activate  # Windows
   ```
3. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```
4. 运行应用：
   ```bash
   python run.py
   ```

## 项目结构
```
image2video/
├── run.py                  # 应用入口
├── requirements.txt        # 项目依赖
├── src/
│   ├── ui/                # UI相关代码
│   │   ├── main_window.py
│   │   └── video_preview.py
│   ├── models/            # 数据模型
│   │   └── image_item.py
│   ├── services/          # 业务逻辑
│   │   ├── audio_service.py
│   │   └── video_service.py
│   └── utils/             # 工具函数
├── resources/             # 资源文件
├── audio/                 # 音频文件目录
└── output/                # 输出视频目录
```

## 注意事项
- 视频生成可能需要较长时间，取决于图片数量和分辨率
- 建议使用高速网络连接
- 确保有足够的磁盘空间用于视频生成 